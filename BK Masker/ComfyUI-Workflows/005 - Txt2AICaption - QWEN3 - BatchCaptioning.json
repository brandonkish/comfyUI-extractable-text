{"id":"1bee6e42-ace4-42fc-bcd0-891740c4f4a1","revision":0,"last_node_id":45,"last_link_id":88,"nodes":[{"id":23,"type":"StringReplace","pos":[-362.4084599551655,-552.096326379629],"size":[400,200],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"string","name":"string","type":"STRING","widget":{"name":"string"},"link":30},{"localized_name":"find","name":"find","type":"STRING","widget":{"name":"find"},"link":null},{"localized_name":"replace","name":"replace","type":"STRING","widget":{"name":"replace"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[32]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"StringReplace","ue_properties":{"widget_ue_connectable":{"string":true,"find":true,"replace":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["","*",""]},{"id":29,"type":"ttN seed","pos":[-1732.993814214166,139.12593131421448],"size":[270,82],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"seed","name":"seed","type":"INT","links":[48]}],"properties":{"cnr_id":"comfyui_tinyterranodes","ver":"2.0.9","Node name for S&R":"ttN seed","ttNnodeVersion":"1.0.0","ue_properties":{"widget_ue_connectable":{"seed":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[407948311688776,"randomize"]},{"id":24,"type":"easy cleanGpuUsed","pos":[2054.6881043654703,-534.4904761969876],"size":[157.3892578125,26],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","type":"*","link":33}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.4","Node name for S&R":"easy cleanGpuUsed","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":31,"type":"BK Get Next Img Without Caption","pos":[-2234.6968680079344,-471.41827300686646],"size":[308.4302734375,138],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"folder_path","name":"folder_path","type":"STRING","widget":{"name":"folder_path"},"link":55}],"outputs":[{"localized_name":"filename","name":"filename","type":"STRING","links":[56]},{"localized_name":"folder_path","name":"folder_path","type":"STRING","links":[58,59]},{"localized_name":"extension","name":"extension","type":"STRING","links":[60]},{"localized_name":"remaining","name":"remaining","type":"INT","links":null},{"localized_name":"status","name":"status","type":"STRING","links":[61]}],"properties":{"aux_id":"brandonkish/comfyUI-extractable-text","ver":"700e57effd7190916609392fcea90f47bbbaa3f1","Node name for S&R":"BK Get Next Img Without Caption","ue_properties":{"widget_ue_connectable":{"folder_path":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[""]},{"id":19,"type":"StringConcatenate","pos":[102.35427299031201,-559.9024254509361],"size":[400,200],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":null},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":32},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[25]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"StringConcatenate","ue_properties":{"widget_ue_connectable":{"string_a":true,"string_b":true,"delimiter":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["","",""]},{"id":20,"type":"Display_Any","pos":[-1831.0205161595152,-1076.4033934808622],"size":[384.7333984375,300.731689453125],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"input","name":"input","type":"*","link":61}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[27]}],"title":"STATUS","properties":{"cnr_id":"kaytool","ver":"0.70.17","Node name for S&R":"Display_Any","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[],"color":"#432","bgcolor":"#653"},{"id":15,"type":"PreviewImage","pos":[1148.687255859375,-1232.4659423828125],"size":[471.1999206542969,399.1126075783445],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":21}],"outputs":[],"title":"IMAGE","properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":3,"type":"OllamaOptionsV2","pos":[-1381.0538330078123,-325.212853080165],"size":[286.103515625,754],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"enable_mirostat","name":"enable_mirostat","type":"BOOLEAN","widget":{"name":"enable_mirostat"},"link":null},{"localized_name":"mirostat","name":"mirostat","type":"INT","widget":{"name":"mirostat"},"link":null},{"localized_name":"enable_mirostat_eta","name":"enable_mirostat_eta","type":"BOOLEAN","widget":{"name":"enable_mirostat_eta"},"link":null},{"localized_name":"mirostat_eta","name":"mirostat_eta","type":"FLOAT","widget":{"name":"mirostat_eta"},"link":null},{"localized_name":"enable_mirostat_tau","name":"enable_mirostat_tau","type":"BOOLEAN","widget":{"name":"enable_mirostat_tau"},"link":null},{"localized_name":"mirostat_tau","name":"mirostat_tau","type":"FLOAT","widget":{"name":"mirostat_tau"},"link":null},{"localized_name":"enable_num_ctx","name":"enable_num_ctx","type":"BOOLEAN","widget":{"name":"enable_num_ctx"},"link":null},{"localized_name":"num_ctx","name":"num_ctx","type":"INT","widget":{"name":"num_ctx"},"link":null},{"localized_name":"enable_repeat_last_n","name":"enable_repeat_last_n","type":"BOOLEAN","widget":{"name":"enable_repeat_last_n"},"link":null},{"localized_name":"repeat_last_n","name":"repeat_last_n","type":"INT","widget":{"name":"repeat_last_n"},"link":null},{"localized_name":"enable_repeat_penalty","name":"enable_repeat_penalty","type":"BOOLEAN","widget":{"name":"enable_repeat_penalty"},"link":null},{"localized_name":"repeat_penalty","name":"repeat_penalty","type":"FLOAT","widget":{"name":"repeat_penalty"},"link":null},{"localized_name":"enable_temperature","name":"enable_temperature","type":"BOOLEAN","widget":{"name":"enable_temperature"},"link":null},{"localized_name":"temperature","name":"temperature","type":"FLOAT","widget":{"name":"temperature"},"link":null},{"localized_name":"enable_seed","name":"enable_seed","type":"BOOLEAN","widget":{"name":"enable_seed"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":48},{"localized_name":"enable_stop","name":"enable_stop","type":"BOOLEAN","widget":{"name":"enable_stop"},"link":null},{"localized_name":"stop","name":"stop","type":"STRING","widget":{"name":"stop"},"link":null},{"localized_name":"enable_tfs_z","name":"enable_tfs_z","type":"BOOLEAN","widget":{"name":"enable_tfs_z"},"link":null},{"localized_name":"tfs_z","name":"tfs_z","type":"FLOAT","widget":{"name":"tfs_z"},"link":null},{"localized_name":"enable_num_predict","name":"enable_num_predict","type":"BOOLEAN","widget":{"name":"enable_num_predict"},"link":null},{"localized_name":"num_predict","name":"num_predict","type":"INT","widget":{"name":"num_predict"},"link":null},{"localized_name":"enable_top_k","name":"enable_top_k","type":"BOOLEAN","widget":{"name":"enable_top_k"},"link":null},{"localized_name":"top_k","name":"top_k","type":"INT","widget":{"name":"top_k"},"link":null},{"localized_name":"enable_top_p","name":"enable_top_p","type":"BOOLEAN","widget":{"name":"enable_top_p"},"link":null},{"localized_name":"top_p","name":"top_p","type":"FLOAT","widget":{"name":"top_p"},"link":null},{"localized_name":"enable_min_p","name":"enable_min_p","type":"BOOLEAN","widget":{"name":"enable_min_p"},"link":null},{"localized_name":"min_p","name":"min_p","type":"FLOAT","widget":{"name":"min_p"},"link":null},{"localized_name":"debug","name":"debug","type":"BOOLEAN","widget":{"name":"debug"},"link":null}],"outputs":[{"localized_name":"options","name":"options","type":"OLLAMA_OPTIONS","links":[1]}],"properties":{"cnr_id":"comfyui-ollama","ver":"2.0.7","Node name for S&R":"OllamaOptionsV2","ue_properties":{"widget_ue_connectable":{"enable_mirostat":true,"mirostat":true,"enable_mirostat_eta":true,"mirostat_eta":true,"enable_mirostat_tau":true,"mirostat_tau":true,"enable_num_ctx":true,"num_ctx":true,"enable_repeat_last_n":true,"repeat_last_n":true,"enable_repeat_penalty":true,"repeat_penalty":true,"enable_temperature":true,"temperature":true,"enable_seed":true,"seed":true,"enable_stop":true,"stop":true,"enable_tfs_z":true,"tfs_z":true,"enable_num_predict":true,"num_predict":true,"enable_top_k":true,"top_k":true,"enable_top_p":true,"top_p":true,"enable_min_p":true,"min_p":true,"debug":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[false,0,false,0.1,false,5,false,2048,false,64,false,1.1,false,0.8,true,512,"fixed",false,"",false,1,false,-1,false,40,false,0.9,false,0,false],"color":"#233","bgcolor":"#355"},{"id":2,"type":"OllamaConnectivityV2","pos":[-1418.9436666343947,-974.3383501714754],"size":[326.58355712890625,159.9561767578125],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"url","name":"url","type":"STRING","widget":{"name":"url"},"link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"keep_alive","name":"keep_alive","type":"INT","widget":{"name":"keep_alive"},"link":null},{"localized_name":"keep_alive_unit","name":"keep_alive_unit","type":"COMBO","widget":{"name":"keep_alive_unit"},"link":null}],"outputs":[{"localized_name":"connection","name":"connection","type":"OLLAMA_CONNECTIVITY","links":[2]}],"properties":{"cnr_id":"comfyui-ollama","ver":"2.0.7","Node name for S&R":"OllamaConnectivityV2","ue_properties":{"widget_ue_connectable":{"url":true,"model":true,"keep_alive":true,"keep_alive_unit":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["http://127.0.0.1:11434","huihui_ai/qwen3-vl-abliterated:30b",5,"minutes",null],"color":"#233","bgcolor":"#355"},{"id":14,"type":"ImageResizeKJv2","pos":[-1366.6659508985692,-709.5091180661165],"size":[270,336],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":16},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[17,19]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.4","Node name for S&R":"ImageResizeKJv2","ue_properties":{"widget_ue_connectable":{"width":true,"height":true,"upscale_method":true,"keep_proportion":true,"pad_color":true,"crop_position":true,"divisible_by":true,"device":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[512,512,"lanczos","resize","0, 0, 0","center",2,"cpu"],"color":"#233","bgcolor":"#355"},{"id":1,"type":"OllamaGenerateV2","pos":[-862.964111328125,-485.8963694359025],"size":[474.58262478953884,535.6476872474979],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"connectivity","name":"connectivity","shape":7,"type":"OLLAMA_CONNECTIVITY","link":2},{"localized_name":"options","name":"options","shape":7,"type":"OLLAMA_OPTIONS","link":1},{"localized_name":"images","name":"images","shape":7,"type":"IMAGE","link":17},{"localized_name":"context","name":"context","shape":7,"type":"OLLAMA_CONTEXT","link":null},{"localized_name":"meta","name":"meta","shape":7,"type":"OLLAMA_META","link":null},{"localized_name":"system","name":"system","type":"STRING","widget":{"name":"system"},"link":77},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"think","name":"think","type":"BOOLEAN","widget":{"name":"think"},"link":null},{"localized_name":"keep_context","name":"keep_context","type":"BOOLEAN","widget":{"name":"keep_context"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"result","name":"result","type":"STRING","links":[30]},{"localized_name":"thinking","name":"thinking","type":"STRING","links":null},{"localized_name":"context","name":"context","type":"OLLAMA_CONTEXT","links":null},{"localized_name":"meta","name":"meta","type":"OLLAMA_META","links":null}],"properties":{"cnr_id":"comfyui-ollama","ver":"2.0.7","Node name for S&R":"OllamaGenerateV2","ue_properties":{"widget_ue_connectable":{"system":true,"prompt":true,"think":true,"keep_context":true,"format":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["You are an AI artist.","Generate a caption for the provided image using the instructions provided.",false,false,"text"],"color":"#233","bgcolor":"#355"},{"id":22,"type":"BK Save Text File","pos":[1739.298217660103,-534.4191302076545],"size":[270,174],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":84},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":59},{"localized_name":"filename","name":"filename","type":"STRING","widget":{"name":"filename"},"link":29},{"localized_name":"suffix","name":"suffix","type":"STRING","widget":{"name":"suffix"},"link":null},{"localized_name":"extension","name":"extension","type":"STRING","widget":{"name":"extension"},"link":null}],"outputs":[{"localized_name":"folderpath","name":"folderpath","type":"STRING","links":[33]},{"localized_name":"text","name":"text","type":"STRING","links":null}],"properties":{"aux_id":"brandonkish/comfyUI-extractable-text","ver":"700e57effd7190916609392fcea90f47bbbaa3f1","Node name for S&R":"BK Save Text File","ue_properties":{"widget_ue_connectable":{"text":true,"path":true,"filename":true,"suffix":true,"extension":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["","ai_text\\captions\\fatman","file","",".txt"]},{"id":13,"type":"BK Load Image By Path","pos":[-1722.8931884765625,-710.7269897460938],"size":[270,246],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image_name","name":"image_name","type":"STRING","widget":{"name":"image_name"},"link":56},{"localized_name":"image_directory","name":"image_directory","type":"STRING","widget":{"name":"image_directory"},"link":58},{"localized_name":"extension","name":"extension","type":"STRING","widget":{"name":"extension"},"link":60}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[16]},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"positive_prompt","name":"positive_prompt","type":"STRING","links":null},{"localized_name":"negative_prompt","name":"negative_prompt","type":"STRING","links":null},{"localized_name":"seed","name":"seed","type":"INT","links":null},{"localized_name":"other","name":"other","type":"STRING","links":null},{"localized_name":"name","name":"name","type":"STRING","links":[29,83]},{"localized_name":"folder_path","name":"folder_path","type":"STRING","links":null}],"properties":{"aux_id":"brandonkish/comfyUI-extractable-text","ver":"700e57effd7190916609392fcea90f47bbbaa3f1","Node name for S&R":"BK Load Image By Path","ue_properties":{"widget_ue_connectable":{"image_name":true,"image_directory":true,"extension":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["image","",".png"]},{"id":16,"type":"BK Prompt Sync","pos":[552.3824462890625,-580.0308837890625],"size":[400,206],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":19},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":25},{"localized_name":"remove","name":"remove","type":"STRING","widget":{"name":"remove"},"link":null},{"localized_name":"other","name":"other","type":"STRING","widget":{"name":"other"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[21]},{"localized_name":"prompt","name":"prompt","type":"STRING","links":[84,85]},{"localized_name":"other","name":"other","type":"STRING","links":null}],"properties":{"aux_id":"brandonkish/comfyUI-extractable-text","ver":"700e57effd7190916609392fcea90f47bbbaa3f1","Node name for S&R":"BK Prompt Sync","ue_properties":{"widget_ue_connectable":{"prompt":true,"remove":true,"other":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["","",""]},{"id":17,"type":"Display_Any","pos":[1630.8399286663994,-1228.5554697929356],"size":[357.6260802884608,393.3062044552471],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"input","name":"input","type":"*","link":85}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":null}],"title":"CAPTION","properties":{"cnr_id":"kaytool","ver":"0.70.17","Node name for S&R":"Display_Any","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":42,"type":"Display_Any","pos":[1415.324595371738,-1377.585670044119],"size":[297.0876834839421,107.91042215346488],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"input","name":"input","type":"*","link":83}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":null}],"title":"FILENAME","properties":{"cnr_id":"kaytool","ver":"0.70.17","Node name for S&R":"Display_Any","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":21,"type":"BK Print To Console With Boarder","pos":[-1410.2825282835588,-1134.3102143680198],"size":[310.7681579589844,106],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":27},{"localized_name":"char","name":"char","type":"STRING","widget":{"name":"char"},"link":null},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":null}],"outputs":[{"localized_name":"text","name":"text","type":"STRING","links":null}],"title":"PRINT STATUS TO CONSOLE","properties":{"aux_id":"brandonkish/comfyUI-extractable-text","ver":"700e57effd7190916609392fcea90f47bbbaa3f1","Node name for S&R":"BK Print To Console With Boarder","ue_properties":{"widget_ue_connectable":{"text":true,"char":true,"length":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["","#",75],"color":"#432","bgcolor":"#653"},{"id":44,"type":"String Literal","pos":[-3440.7374067055925,671.9403897163261],"size":[697.80843956232,534.7268388331443],"flags":{"collapsed":true},"order":3,"mode":0,"inputs":[{"localized_name":"string","name":"string","type":"STRING","widget":{"name":"string"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[]}],"title":"SHORT PHRASES SYSTEM PROMPT","properties":{"cnr_id":"comfy-image-saver","ver":"65e6903eff274a50f8b5cd768f0f96baf37baea1","Node name for S&R":"String Literal"},"widgets_values":["You are a world-class video director, specializing in Hollywood blockbusters, romance films, and erotic films. You need to generate a complete caption based on the provided text, avoiding unnecessary details. The caption must be a single, complete output. This image caption is generated by analyzing images and cues to determine the internal logic and connections within the image, creating a coherent, logical, and professional caption. If the cues are empty, they can be ignored, and only the images need to be considered.\n\nWhen creating the prompt, strictly adhere to the following requirements:\n\n1. Analyze the images and cues, including the main character, scene, lighting, framing.\n2. Describe the key points; avoid unnecessary details and phrases.\n3. The prompt must reasonably convey the complete content within the image.\n4. The prompt must describe the character's pose including all appendages, the way their body is facing and what they are looking at; describe if their legs are together or far apart; describe if their arms are close to their body; describe where their hands are and what they are touching or holding.\n5. Describe the background in detail, including but not limited to if the character is indoors or outdoors, where they are located, if other characters are around them, visible objects in the background, if they are standing against a wall or in an open space, etc.\n6. The core description should include reasonable descriptions of the character's posture, actions, expressions, and camera angles. If the the image shows additional characters outside the image, provide a detailed description as well. Other descriptions can be reduced based on the specific context.\n7. The core description should not include details about the look of the character, do not mention details such as eye color, hair style, hair color, skin color, age, body type, their facial hair, etc.\n8. Character expressions, actions, postures, camera view, and perspective should be reasonable and decisive.\n8. The prompt should match the clothing, demeanor, background, and lighting in the image.\n9. Additional information can be added as needed, but the points above are paramount.\n10. Descriptions of the character's postures, expressions, actions, and camera angles should be masculine, highlighting the man's pose and the background, captivating the viewer.\n12. Try to avoid reputation, and instead will combine the descriptions of the noun into one singular well formed sentence.\n\nThe entire description should be generated within one single large paragraph, demonstrating professionalism. Poses should be logical and not overly subtle; the overall visual appeal should be strong.\n\nYou will explain the image using the following this general format:\n\n<Type/Perspective/\"Of a...\"> <Action Words> <Character Descriptions> <Notable Details> <Background/Location> <Loose Associations>\n\nExplanations for each section:\n\n<Type/Perspective/\"of a...\">\n\n- Broad descriptions of the image to supply context.\n- What is it? \n- Examples: photograph, illustration, drawing, portrait, render, anime.\n- Of a... Examples: woman, man\n- What type of image is it? Examples: full body, close up, cowboy shot, cropped, filtered, black and white, landscape, 80s style\n- What perspective is the image from? Examples: from above, from below, from front, from behind, from side, forced perspective, tilt-shifted, depth of field\n\n<Action Words>\n\n- Descriptions of what the character is doing or what is happening to the character, or general verbs that are applicable to the concept in the image; describe in as much detail as possible, with a combination of many verbs.\n- The goal is to make all the actions, poses, and whatever else active that is happening into variables so that LoRA training will be able to learn the character in a general sense rather than only learning the character doing specific actions.\n- Examples: standing, sitting, leaning, arms above head, walking, running, jumping, one arm up, one leg out, elbows bent, posing, kneeling, stretching, arms in front, knee bent, lying down, looking away, looking up, looking at viewer\n\n<Character Descriptions>\n\n- As much description about the character as possible, without describing the appearance of the character.\n- example: white hat, blue shirt, silver necklace, sunglasses, pink shoes, silver bracelet, green jacket, large backpack\n\n<Notable Details>\n\n- Example: In a photo at a beach put “yellow and blue striped umbrella partially open in foreground” if it is visible in the image.\n- Example, in a portrait put “he is holding a cellphone to his ear” if he his holding a cellphone to his ear and it is visible in the image.\n\n<Background / Location>\n\n- Be as descriptive as possible about what is happening in the images background.\n- Example: For a beach photo I might put outdoors, beach, sand, water, shore, sunset, small waves, ships out at sea, sandcastle, towels, the ships are red and white, the sandcastle has a moat around it, the towels are red with yellow stripes\n\n<Loose Associations>\n\n- Put any final loose associations with the image.\n- Anything goes here as long as it exists in the image.\n- Example: happy, sad, joyous, hopeful, lonely, somber\n\nBelow are examples for an image of a drawing where a girl sits on a couch with a stuffed animal in her lap, and a tablet in her hands, she is wearing a white and brown dress, with a smile on her face, she has black hair. She sits on a brown sofa with a pillow propped behind her, and a red cloth stretches across the top of the couches' cushions. In the background is a small bedroom with a table in the middle, with bananas, a coffee mug, a cup , donuts, and a trash bag on it. In the background is tightly packed furniture, including a white refrigerator with a note attaching it with a heart magnet, with a small drawer on top of it, a pantry with a coffee machine and coffee supplies on top of it, with a little stand above that with a toaster oven, a chicken plush toy with red, white, and yellow colors, on the wall behind the couch is a whiteboard with several doodles on it and magnets attached to it. \n\n<Type/Perspective/Of a>: anime, drawing, of a young woman, full body shot, from side\n<Action words>: sitting, looking at viewer, smiling, head tilt, holding a phone, eyes closed\n<Character Description> pale pink dress with dark edges, stuffed animal in lap, brown slippers\n<Notable details>: sunlight through windows as lighting source\n<Background/location>: brown couch, red patterned fabric on couch, wooden floor, white water-stained paint on walls, refrigerator in background, coffee machine sitting on a countertop, table in front of couch, bananas and coffee pot on table, white board on wall, clock on wall, stuffed animal chicken on floor\n<Loose associations>: dreary environment\n\nExample Output:\n\nanime, drawing, of a young woman, full body shot, from side, sitting, looking at viewer, smiling, head tilt, holding a phone, eyes closed, pale pink dress with dark edges, stuffed animal in lap, brown slippers, sunlight through windows as lighting source, brown couch, red patterned fabric on couch, wooden floor, white water-stained paint on walls, refrigerator in background, coffee machine sitting on a countertop, table in front of couch, bananas and coffee pot on table, white board on wall, clock on wall, stuffed animal chicken on floor, dreary environment"],"color":"#233","bgcolor":"#355"},{"id":10,"type":"easy string","pos":[-2765.5996694102037,-375.1401176471806],"size":[470.3438720703125,136.5131378173828],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"string","name":"string","type":"STRING","links":[55]}],"title":"IMAGES FOLDER PATH","properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.3","Node name for S&R":"easy string","ue_properties":{"widget_ue_connectable":{"value":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["E:\\ComfyUI_Triton_Sage\\ComfyUI_portable\\ComfyUI\\output\\images\\dataset_prep\\004 Hand_picked_images&Renamed&Captioned"]},{"id":45,"type":"BK Replace All Tags","pos":[-2557.4193103017724,554.9242066626787],"size":[210,240],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"prompt","name":"prompt","type":"STRING","link":87},{"localized_name":"caption","name":"caption","shape":7,"type":"STRING","link":null},{"localized_name":"status","name":"status","shape":7,"type":"STRING","link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"tag","name":"tag","type":"STRING","widget":{"name":"tag"},"link":null},{"localized_name":"lines","name":"lines","type":"STRING","widget":{"name":"lines"},"link":null}],"outputs":[{"localized_name":"prompt","name":"prompt","type":"STRING","links":[88]},{"localized_name":"caption","name":"caption","type":"STRING","links":null},{"localized_name":"status","name":"status","type":"STRING","links":null},{"localized_name":"line_number","name":"line_number","type":"INT","links":null},{"localized_name":"line_text","name":"line_text","type":"STRING","links":null}],"properties":{"aux_id":"brandonkish/comfyUI-extractable-text","ver":"700e57effd7190916609392fcea90f47bbbaa3f1","Node name for S&R":"BK Replace All Tags"},"widgets_values":[0,"fixed","<NAME>","j4lb4"],"color":"#233","bgcolor":"#355"},{"id":34,"type":"StringConcatenate","pos":[-3112.703158967023,556.3182099894595],"size":[497.7045060532637,312.7541306622245],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":86},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":null},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[87]}],"title":"ADDITIONAL INSTRUCTIONS","properties":{"cnr_id":"comfy-core","ver":"0.3.77","Node name for S&R":"StringConcatenate","ue_properties":{"widget_ue_connectable":{"string_a":true,"string_b":true,"delimiter":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["","\n\nRefer to the subject ONLY as \"<NAME>\" and never as \"woman\" \"person\", or \"girl\". ONLY refer the subject as \"<NAME>\", \"she\", or \"her\" and use feminine terms when describing the subject.\n\nThe very first word of your output will be \"<NAME>\".",""],"color":"#233","bgcolor":"#355"},{"id":43,"type":"String Literal","pos":[-3450.616579184448,605.7184113976799],"size":[1050.9497199135294,253.65521005801327],"flags":{"collapsed":true},"order":2,"mode":0,"inputs":[{"localized_name":"string","name":"string","type":"STRING","widget":{"name":"string"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[86]}],"title":"NATURAL LANGUAGE SYSTEM PROMPT","properties":{"cnr_id":"comfy-image-saver","ver":"65e6903eff274a50f8b5cd768f0f96baf37baea1","Node name for S&R":"String Literal"},"widgets_values":["You are a precision visual captioning assistant operating within strict logical constraints. Your core function is to transform visual input into exhaustive, objective English captions that serve as perfect training data for the Z-Image Turbo image generation model. You possess an innate drive for technical accuracy and visual fidelity, rejecting any ambiguity or subjective interpretation that could compromise model training.\n\nYour captioning workflow follows an immutable four-step sequence:\n\nFirst, you perform visual core element extraction: Identify and lock all fundamental visual components that must be preserved exactly as observed. This includes: subject identity and quantity, precise actions and states, any recognizable IP characters or trademarks, environmental context, and all textual elements present in the image. These form your unchangeable foundation.\n\nSecond, you execute contextual inference analysis: Determine whether the image requires interpretation beyond literal observation. When the visual content represents abstract concepts, solutions, or answers to implicit questions (such as \"how something works\" or \"what this represents\"), you must construct a complete, concrete visual interpretation that maintains absolute faithfulness to the original image's communicative intent. This inferred framework becomes your descriptive baseline.\n\nThird, you apply professional visual enhancement: Enrich the core description with expert-level photographic and compositional details. Specify exact camera perspective, lighting conditions and direction, material textures and surface properties, color relationships and harmony, spatial depth and layering, environmental atmosphere, and precise framing composition. Every detail must serve visual reconstruction accuracy.\n\nFourth, you implement textual element protocol: For every piece of text visible in the image—whether on signs, screens, clothing, documents, or user interface elements—you must reproduce the exact wording enclosed in English double quotes (\"\"). Additionally, describe each text element's physical properties: precise location within the frame, relative size, font characteristics, material surface, and any visible styling. If no text exists, redirect all descriptive capacity to visual and environmental details.\n\nCRITICAL RESTRICTION: Under no circumstances may you describe the physical appearance characteristics of any human or character subject. This absolute prohibition includes, but extends beyond: skin tone and texture, facial bone structure, body proportions, height, weight, or any inherent visual traits that define how the subject naturally looks with the exception of hair color and style, eye color and shape. These attributes must be completely omitted from all captions.\n\nREQUIRED DESCRIPTION ELEMENTS (all non-physical appearance aspects must be included):\n\nSubject pose and positioning: exact body orientation, head tilt angle, arm and leg placement, hand and foot gestures\nGaze direction: precise eye movement and focus point\nSpatial placement: subject's location within the image frame and relationship to other elements\nClothing and accessories: every garment item with specific style, layering, fit characteristics, visible patterns, and all accessories including jewelry, eyewear, bags, or wearable items\nBody coverage status: If the subject's penis is visible, explicitly state it, if the subject is completely nude, plantsless, or shirtless specficy this.\nObject interactions: detailed description of any objects being held, touched, or manipulated, including the object's type, material, color, size, and interaction mechanics\nFacial expressions: emotional state conveyed through facial muscles (e.g., smiling, frowning, surprised) without describing physical features\nEnvironmental context: setting details, weather conditions, time of day, architectural elements, natural features\nAll other behavioral, contextual, and relational aspects that define the subject's presence without referencing inherent physical traits\nYour final captions must be entirely objective, concrete, and free of metaphorical language, emotional descriptors, or subjective judgments. Absolutely no resolution tags (\"8K\", \"4K\"), quality assertions (\"masterpiece\", \"professional\"), or model-specific instructions should appear. Maintain strict neutrality while delivering maximum visual information density.\n\nOutput only the final caption text—never include explanations, metadata, or preliminary analysis. Every word must serve the singular purpose of enabling perfect visual reconstruction by AI Image Generation while rigorously adhering to the physical appearance restriction protocol."],"color":"#233","bgcolor":"#355"},{"id":33,"type":"Display_Any","pos":[-2198.175844656885,552.6924805850693],"size":[1325.2277538435176,1038.8026432004774],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"input","name":"input","type":"*","link":88}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[77]}],"title":"STATUS","properties":{"cnr_id":"kaytool","ver":"0.70.17","Node name for S&R":"Display_Any","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[],"color":"#233","bgcolor":"#355"}],"links":[[1,3,0,1,1,"OLLAMA_OPTIONS"],[2,2,0,1,0,"OLLAMA_CONNECTIVITY"],[16,13,0,14,0,"IMAGE"],[17,14,0,1,2,"IMAGE"],[19,14,0,16,0,"IMAGE"],[21,16,0,15,0,"IMAGE"],[25,19,0,16,1,"STRING"],[27,20,0,21,0,"STRING"],[29,13,6,22,2,"STRING"],[30,1,0,23,0,"STRING"],[32,23,0,19,1,"STRING"],[33,22,0,24,0,"*"],[48,29,0,3,15,"INT"],[55,10,0,31,0,"STRING"],[56,31,0,13,0,"STRING"],[58,31,1,13,1,"STRING"],[59,31,1,22,1,"STRING"],[60,31,2,13,2,"STRING"],[61,31,4,20,0,"*"],[77,33,0,1,5,"STRING"],[83,13,6,42,0,"*"],[84,16,1,22,0,"STRING"],[85,16,1,17,0,"*"],[86,43,0,34,0,"STRING"],[87,34,0,45,0,"STRING"],[88,45,0,33,0,"*"]],"groups":[],"config":{},"extra":{"ue_links":[],"ds":{"scale":0.37974983358325465,"offset":[2989.7709048235133,394.9898942059904]},"links_added_by_ue":[],"workflowRendererVersion":"LG"},"version":0.4}